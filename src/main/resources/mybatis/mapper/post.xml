<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.somaeja.post.mapper.PostMapper">

    <insert id="save" parameterType="com.somaeja.post.entity.Post">
        INSERT INTO POST
        (
            USER_ID,
            LOCATION_ID,
            IMAGE,
            POST_TITLE,
            POST_CONTENT,
            POST_PRICE,
            POST_OFFERSTATUS,
            POST_TRADESTATUS,
            POST_CREATEDATE,
            POST_MODIFYDATE
        )
        VALUES
        (
            #{userId},
            #{locationId},
            #{imageId},
            #{title},
            #{content},
            #{price},
            #{isNegotiable},
            #{isOfflineTrade},
            #{createdDate},
            #{modifyDate}
        )
    </insert>

    <select id="findByAll" resultType="com.somaeja.post.entity.Post">
        SELECT
            POST_ID as "id",
            USER_ID as "userId",
            LOCATION_ID as "locationId",
            IMAGE as "imageId",
            POST_TITLE as "title",
            POST_CONTENT as "content",
            POST_PRICE as "price",
            POST_OFFERSTATUS as "isNegotiable",
            POST_TRADESTATUS as "isOfflineTrade",
            POST_CREATEDATE as "createdDate",
            POST_MODIFYDATE as "modifyDate"
        FROM POST
    </select>

    <select id="findByTitle" resultType="com.somaeja.post.entity.Post" parameterType="string">
        SELECT
            POST_ID as "id",
            USER_ID as "userId",
            LOCATION_ID as "locationId",
            IMAGE as "imageId",
            POST_TITLE as "title",
            POST_CONTENT as "content",
            POST_PRICE as "price",
            POST_OFFERSTATUS as "isNegotiable",
            POST_TRADESTATUS as "isOfflineTrade",
            POST_CREATEDATE as "createdDate",
            POST_MODIFYDATE as "modifyDate"
        FROM POST
        WHERE POST_TITLE = #{searchTitle}
    </select>

    <select id="findByLocation" resultType="com.somaeja.post.entity.Post" parameterType="long">
        SELECT
            POST_ID as "id",
            USER_ID as "userId",
            LOCATION_ID as "locationId",
            IMAGE as "imageId",
            POST_TITLE as "title",
            POST_CONTENT as "content",
            POST_PRICE as "price",
            POST_OFFERSTATUS as "isNegotiable",
            POST_TRADESTATUS as "isOfflineTrade",
            POST_CREATEDATE as "createdDate",
            POST_MODIFYDATE as "modifyDate"
        FROM POST
        WHERE LOCATION_ID = #{locationId}
    </select>

    <select id="findByUser" resultType="com.somaeja.post.entity.Post" parameterType="long">
        select
            POST_ID as "id",
            USER_ID as "userId",
            LOCATION_ID as "locationId",
            IMAGE as "imageId",
            POST_TITLE as "title",
            POST_CONTENT as "content",
            POST_PRICE as "price",
            POST_OFFERSTATUS as "isNegotiable",
            POST_TRADESTATUS as "isOfflineTrade",
            POST_CREATEDATE as "createdDate",
            POST_MODIFYDATE as "modifyDate"
        FROM POST
        WHERE USER_ID = #{userId}
    </select>

</mapper>

